{% extends "base.html" %}

{% block title %}Detalles de {{ libro.titulo }}{% endblock %}

{% block content %}
<section class="post">
    <header class="major">
        <h1>{{ libro.titulo }}</h1>
        <p>Detalles del libro seleccionado.</p>
    </header>
    <div class="box">
        <p><strong>Autor:</strong> {{ libro.autor }}</p>
        <p><strong>Género:</strong> {{ libro.genero }}</p>
        <p><strong>Año de Publicación</strong> {{ libro.año_publicacion }}</p>
        <p><strong>Disponible:</strong> {{ 'Sí' if libro.disponible else 'No' }}</p>
        <h3>Historial de Préstamos</h3>
        {% if libro.prestamos %}
        <ul>
            {% for prestamo in libro.prestamos %}
            <li>
                {{ prestamo.nombre_usuario }} (Préstamo: {{ prestamo.fecha_prestamo }}
                {% if prestamo.fecha_devolucion %} - Devolución: {{ prestamo.fecha_devolucion }}{% else %} - No devuelto{% endif %})
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No hay préstamos registrados.</p>
        {% endif %}
    </div>
    <ul class="actions">
        <li><a href="{{ url_for('libros') }}" class="button">Volver a Buscar</a></li>
    </ul>
</section>
{% endblock %}